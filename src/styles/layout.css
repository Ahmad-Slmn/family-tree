/* ================== الأساسيات ================== */
/* ===================== Cairo Font (محلي) ===================== */
@font-face {
  font-family: 'Cairo';
  src: url('../assets/fonts/Cairo-Regular.ttf') format('truetype');
  font-weight: 400;
  font-display: swap;
}
@font-face {
  font-family: 'Cairo';
  src: url('../assets/fonts/Cairo-Bold.ttf') format('truetype');
  font-weight: 700;
  font-display: swap;
}

/* الخط الافتراضي العام */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Cairo', system-ui, -apple-system, sans-serif;
}
body{background:var(--bg-gradient);min-height:100vh;color:var(--text-main); overflow-x: hidden}
/* ===== غطاء التحميل (Splash) + البطاقة الداخلية ===== */

#app-splash[hidden]{display:none;}

#app-splash{
  position:fixed;
  inset:0;
  z-index:1300;
  display:flex;
  align-items:center;
  justify-content:center;
  padding:1.5rem;
  /* الخلفية تتبع لون overlay الخاص بالثيم */
  background:
    linear-gradient(
      to bottom,
      color-mix(in oklab,var(--modal-overlay,rgba(0,0,0,.8)) 65%,transparent),
      color-mix(in oklab,var(--modal-overlay,rgba(0,0,0,.8)) 80%,transparent)
    ),
    radial-gradient(
      circle at center,
      color-mix(in oklab,var(--modal-overlay,rgba(0,0,0,.8)) 0%,transparent) 0%,
      color-mix(in oklab,var(--modal-overlay,rgba(0,0,0,.8)) 70%,transparent) 100%
    ),
    url("../assets/images/background-family-tree.png") center/cover no-repeat;
  backdrop-filter:blur(7px);
  -webkit-backdrop-filter:blur(7px);
  animation:splashFadeIn .35s ease-out;
}

/* خروج تدريجي للغطاء */
#app-splash.is-hiding{
  animation:splashFadeOut .4s ease-in forwards;
}

/* بطاقة التحميل */
.app-splash-card{
  position:relative;
  inline-size:clamp(17rem,70vw,26rem);
  padding:1.6rem 1.9rem 1.5rem;
  border-radius:1.35rem;
  background:linear-gradient(
    135deg,
    color-mix(in oklab,var(--card-bg,#fff) 94%,#fff),
    color-mix(in oklab,var(--panel-bg,var(--card-bg,#fff)) 92%,#fff)
  );
  box-shadow:
    0 .9rem 2.2rem color-mix(in oklab,#000 26%,transparent),
    0 0 0 .06rem color-mix(in oklab,var(--modal-fg,#111) 10%,transparent);
  text-align:center;
  overflow:hidden;
}

/* أحجام البطاقة حسب العرض */
@media (max-width:30rem){
  .app-splash-card{
    inline-size:100%;
    padding:1.3rem 1.4rem 1.2rem;
    border-radius:1.15rem;
  }
  .app-splash-title{font-size:.98rem;}
  .app-splash-subtitle{font-size:.78rem;}
}

@media (min-width:64rem){
  .app-splash-card{
    inline-size:28rem;
    padding:1.9rem 2.2rem 1.8rem;
  }
  .app-splash-title{font-size:1.15rem;}
}

/* لمسة ضوء متناسقة مع لون النجاح في الثيم */
.app-splash-card::before{
  content:"";
  position:absolute;
  inset:-35% -20% auto auto;
  background:radial-gradient(
    circle at top right,
    color-mix(in oklab,var(--accent-success,#16a34a) 32%,transparent) 0,
    transparent 58%
  );
  opacity:.9;
  pointer-events:none;
}

/* شعار العائلة */
.app-splash-logo{
  inline-size:3.5rem;
  block-size:3.5rem;
  margin:0 auto .9rem;
  border-radius:1.25rem;
  display:flex;
  align-items:center;
  justify-content:center;
  background:color-mix(in oklab,var(--card-bg,#fff) 96%,#000 4%);
  box-shadow:0 .4rem 1rem color-mix(in oklab,#000 22%,transparent);
  padding:.25rem;
}
.app-splash-logo img{
  inline-size:100%;
  block-size:100%;
  border-radius:1rem;
  object-fit:contain;
  display:block;
}

/* العنوان والنص */
.app-splash-title{
  font-size:1.05rem;
  font-weight:700;
  color:var(--title-color,var(--text-main,#111));
  margin-bottom:.2rem;
}
.app-splash-subtitle{
  font-size:.82rem;
  color:color-mix(in oklab,var(--text-main,#111) 68%,transparent);
  opacity:.95;
  line-height:1.6;
}

/* السبنر */
.app-splash-spinner{
  inline-size:2.7rem;
  block-size:2.7rem;
  margin:.95rem auto .6rem;
  border-radius:999px;
  border:.22rem solid color-mix(in oklab,var(--modal-fg,#111) 16%,transparent);
 border-top-color:var(--title-color,var(--text-main,#111));
  animation:spin 1s linear infinite;
}

/* شريط التقدّم */
.app-splash-progress{
  position:relative;
  inline-size:100%;
  max-inline-size:18rem;
  margin:.25rem auto 0;
  block-size:.32rem;
  border-radius:999px;
  background:color-mix(in oklab,var(--modal-fg,#111) 7%,transparent);
}
.app-splash-progress-bar{
  display:block;
  inline-size:0%;
  block-size:100%;
  border-radius:inherit;
  background:var(--title-color,var(--text-main,#111));
  transition:inline-size .35s ease-out;
}
.app-splash-progress-text{
  position:absolute;
  inset-block-start:-1.4rem;
  inset-inline-end:0;
  font-size:.78rem;
  color:color-mix(in oklab,var(--text-main,#111) 70%,transparent);
}

/* دوران المؤشر */
@keyframes spin{
  to{transform:rotate(360deg);}
}

/* دخول الشجرة بعد الغطاء */
.family-tree-enter{
  opacity:0;
  transform:translateY(10px) scale(.97);
  animation:familyTreeIn .45s ease-out forwards;
}
@keyframes familyTreeIn{
  from{opacity:0;transform:translateY(10px) scale(.97);}
  to{opacity:1;transform:translateY(0) scale(1);}
}

/* دخول وخروج الغطاء */
@keyframes splashFadeIn{
  from{opacity:0;transform:translateY(6px);}
  to{opacity:1;transform:translateY(0);}
}
@keyframes splashFadeOut{
  from{opacity:1;transform:translateY(0);}
  to{opacity:0;transform:translateY(10px);}
}



.container{max-width:87.5rem;margin:0 auto}

/* ================== شريط التمرير ================== */
::-webkit-scrollbar{width:.75rem;height:.75rem}
::-webkit-scrollbar-track{background:var(--scroll-track);border-radius:.625rem}
::-webkit-scrollbar-thumb{
  background:var(--scroll-thumb);
  border-radius:.625rem;border:.125rem solid var(--scroll-track);
  opacity:.8;transition:background-color .3s,opacity .3s
}
::-webkit-scrollbar-thumb:hover{background:var(--scroll-thumb-hover);opacity:.6}

/* ================== التوست ================== */
#toastContainer{
  position:fixed;top:0;left:50%;transform:translateX(-50%);
  z-index:9999;display:flex;flex-direction:column;gap:.625rem;pointer-events:none
}
.toast{
  display:flex;align-items:center;justify-content:center;gap:.75rem;
  min-width:18rem;max-width:25rem;padding:.75rem 1.25rem;border-radius:.625rem;
  font-weight:500;font-size:.875rem;box-shadow:0 .25rem 1rem rgba(0,0,0,.2);
  opacity:0;transform:translateY(-2rem);pointer-events:all;
  animation:slideIn .4s forwards,slideOut .4s 2.6s forwards
}
.toast .icon{font-size:1.125rem}
.toast.success{background:var(--toast-success-bg);color:var(--toast-success-fg)}
.toast.error{background:var(--toast-error-bg);color:var(--toast-error-fg)}
.toast.info{background:var(--toast-info-bg);color:var(--toast-info-fg)}
.toast.warning{background:var(--toast-warning-bg);color:var(--toast-warning-fg)}
@keyframes slideIn{from{opacity:0;transform:translateY(-2rem)}to{opacity:1;transform:translateY(0)}}
@keyframes slideOut{from{opacity:1;transform:translateY(0)}to{opacity:0;transform:translateY(-2rem)}}

/* ========== الشريط العلوي ========== */

:root{
  /* أبعاد موحّدة لعناصر الشريط */
  --h: 2.75rem;
  --pad: .75rem;

  /* حركة متوسطة */
  --motion-dur: 240ms;
  --motion-ease: cubic-bezier(.22,.61,.36,1);
}

/* شريط علوي مرن لا يُسقط عناصر جديدة للسطر التالي */
.top-bar{
  display: flex;
  align-items: center;
  gap: .75rem;
  flex-wrap: nowrap;
  width: 100%;
  padding: var(--pad) 1rem;
  margin-bottom: 1.5rem;
  background: var(--panel-bg);
  border: 1px solid var(--surface-border);
  border-radius: .75rem;
  box-shadow: var(--shadow);
}

/* عناصر ثابتة العرض نسبياً */
#activeFamily,
#filtersToggle,
.date-time-display{
  flex: 0 0 auto;          /* لا تتمدد ولا تنكمش */
}

/* البحث يتمدد لكن بحد أقصى حتى لا يبتلع الصف */
.search-wrap{
  position: relative;
  flex: 1 1 clamp(260px, 40vw, 520px);
  min-width: 220px;
}

/* =========================
   Search
========================= */
.search-box{
  position: relative;
  display: flex;
  align-items: center;
  height: var(--h);
  background: var(--card-bg);
  border: 1px solid var(--surface-border);
  border-radius: .75rem;
  padding-inline: .75rem;
  transition: border-color .2s, box-shadow .2s;
}
.search-box .search-icon{
  font-size: 1rem;
  opacity: .55;
  margin-inline-end: .5rem;
  pointer-events: none;
}
.search-box input{
  flex: 1;
  border: 0;
  background: transparent;
  font-size: .95rem;
  color: var(--text-main);
}
.search-box input:focus{ outline: none; }
.search-box:focus-within{
  border-color: var(--focus-border);
  box-shadow: 0 0 0 3px var(--focus-ring-soft);
}

/* زر المسح */
.search-box .clear-btn{
  position: absolute;
  inset-inline-end: .5rem;
  width: 1.6rem; height: 1.6rem;
  display: grid; place-items: center;
  background: transparent; border: 0; cursor: pointer;
  color: var(--text-main); opacity: .5; transition: opacity .2s;
}
.search-box .clear-btn:hover{ opacity: 1; }

/* اقتراحات */
.suggestions{
  position: absolute;
  inset-inline: 0;
  top: calc(100% + .35rem);
  z-index: 30;
  display: none;
  background: var(--card-bg);
  border: 1px solid var(--surface-border);
  border-radius: .65rem;
  max-height: 18rem;
  overflow-y: auto;
  box-shadow: 0 8px 20px rgba(0,0,0,.12);
}
.suggestions.show{ display: block; }
.suggestions .item{
  padding: .6rem .85rem;
  cursor: pointer;
  transition: background .15s;
}
.suggestions .item:hover,
.suggestions .item[aria-selected="true"]{ background: var(--chip-bg); }

/* =========================
   Family button + Filters button (unified)
========================= */
.family-button{
  height: var(--h);
  display: inline-flex;
  align-items: center;
  gap: .5rem;
  padding: 0 .9rem;
  background: var(--card-bg);
  color: var(--text-main);
  border: 1px solid var(--surface-border);
  border-radius: .65rem;
  font-size: .95rem;
  font-weight: 600;
  line-height: 1;
  box-shadow: 0 1px 4px rgba(0,0,0,.06);
}
.family-button i{ font-size: .95rem; opacity: .8; }

/* =========================
   Date/Time pill
========================= */
.date-time-display{
  height: var(--h);
  display: inline-flex;
  align-items: center;
  gap: .5rem;
  padding: 0 .85rem;
  background: var(--chip-bg);
  border: 1px solid var(--surface-border);
  border-radius: .65rem;
  color: var(--text-main);
  font-size: .92rem;
  line-height: 1;
  white-space: nowrap;
}
.date-time-display i{ font-size: .95rem; opacity: .8; }
.day-name{ color: var(--title-color); font-weight: 700; }
.time{ color: var(--arrow-color); font-feature-settings: "tnum"; }

/* إزالة تغليف قديم إن وُجد */
.top-bar > div{ all: unset; position: relative; }
.family-item{ display: contents; }

/* =========================
   Motion: medium, subtle
========================= */
.top-bar > *{
  will-change: transform, opacity;
  animation: topbar-in var(--motion-dur) var(--motion-ease) both;
}
.top-bar > *:nth-child(1){ animation-delay: 20ms; }
.top-bar > *:nth-child(2){ animation-delay: 60ms; }
.top-bar > *:nth-child(3){ animation-delay: 100ms; }
.top-bar > *:nth-child(4){ animation-delay: 140ms; }

@keyframes topbar-in{
  from{ opacity:0; transform: translateY(-6px); }
  to  { opacity:1; transform: translateY(0); }
}

.search-box{
  transition: border-color var(--motion-dur), box-shadow var(--motion-dur), transform var(--motion-dur);
  will-change: box-shadow, transform;
}
.search-box:focus-within{
  transform: translateY(-1px);
  box-shadow: 0 0 0 3px var(--focus-ring-soft), 0 8px 20px rgba(0,0,0,.07);
}

/* اقتراحات: انزلاق + شفافية */
.suggestions{
  transform-origin: top center;
  transform: translateY(-6px);
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transition:
    transform var(--motion-dur) var(--motion-ease),
    opacity var(--motion-dur) var(--motion-ease),
    visibility 0s linear var(--motion-dur);
  will-change: transform, opacity;
}
.suggestions.show{
  transform: translateY(0);
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
  transition-delay: 0s, 0s, 0s;
}

/* زر الفلاتر: تغذية بصرية خفيفة */
#filtersToggle{
  transition: box-shadow var(--motion-dur), transform var(--motion-dur);
  will-change: box-shadow, transform;
}
#filtersToggle:hover{ box-shadow: 0 6px 18px rgba(0,0,0,.12); }
#filtersToggle:active{ transform: translateY(1px) scale(.997); }

/* لوحة الفلاتر (#advFilters) — تتطلب .open من JS */
#advFilters{
  transform-origin: top center;
  transform: translateY(-8px) scaleY(.98);
  opacity: 0;
  visibility: hidden;
  pointer-events: none;
  transition:
    transform var(--motion-dur) var(--motion-ease),
    opacity var(--motion-dur) var(--motion-ease),
    visibility 0s linear var(--motion-dur);
  will-change: transform, opacity;
}
#advFilters.open{
  transform: translateY(0) scaleY(1);
  opacity: 1;
  visibility: visible;
  pointer-events: auto;
  transition-delay: 0s, 0s, 0s;
}
#advFilters .filters-card{
  transition: box-shadow var(--motion-dur), transform var(--motion-dur);
}
#advFilters.open .filters-card:hover{
  box-shadow: 0 8px 24px rgba(0,0,0,.08);
  transform: translateY(-1px);
}

/* احترام تفضيل تقليل الحركة */
@media (prefers-reduced-motion: reduce){
  .top-bar > *,
  .search-box,
  .suggestions,
  #filtersToggle,
  #advFilters,
  #advFilters .filters-card,
  .date-time-display{
    transition: none !important;
    animation: none !important;
    transform: none !important;
  }
}


/* ========== زر فتح اللوحة الجانبية ========== */
.side-toggle{
  position:fixed;inset:auto auto auto .75rem;top:.75rem;z-index:1100;width:42px;height:42px;border-radius:10px;
  display:flex;align-items:center;justify-content:center;background:var(--ctl-bg);color:var(--ctl-fg);
  border:1px solid var(--ctl-border);box-shadow:0 4px 14px rgba(0,0,0,.14),0 1px 0 rgba(255,255,255,.3) inset;
  cursor:pointer;transition:transform .15s ease,box-shadow .2s ease,background .15s ease,border-color .15s ease,color .15s ease
}
.side-toggle i{font-size:1.05rem;line-height:0}
.side-toggle:hover{background:var(--ctl-hover-bg);transform:translateY(-1px);box-shadow:0 6px 18px rgba(0,0,0,.18);border-color:var(--ctl-border)}
.side-toggle:active{background:var(--ctl-active-bg);transform:translateY(0);box-shadow:0 2px 8px rgba(0,0,0,.16) inset}
.side-toggle[aria-expanded="true"]{box-shadow:0 0 0 2px color-mix(in srgb,var(--ctl-ring) 55%,transparent)}
:where(.side-toggle,.icon-btn):focus{outline:none}
:where(.side-toggle,.icon-btn):focus-visible{box-shadow:0 0 0 3px var(--ctl-ring),0 4px 12px rgba(0,0,0,.18);border-color:var(--ctl-ring)}
@media (prefers-reduced-motion:reduce){.side-toggle{transition:none}}

/* ========== الشريط الجانبي ========== */
.side-overlay{position:fixed;inset:0;background:var(--side-overlay);z-index:1098}
.side-panel{
  position:fixed;inset:0 auto 0 0;width:min(360px,92vw); max-height: 100vh;overflow-y: auto;background:var(--card-bg);color:var(--text-main);scrollbar-width: thin;scrollbar-color: var(--scroll-thumb) var(--scroll-track);
  transform:translateX(-100%);transition:transform .25s ease;z-index:1099;display:flex;flex-direction:column;box-shadow:2px 0 12px rgba(0,0,0,.2)
}
.side-panel.open{transform:translateX(0)}
.side-header{position: sticky; top: 0;z-index: 1; display:flex;align-items:center;justify-content:space-between;padding:.75rem 1rem;border-bottom:1px solid var(--surface-border); margin-top: 4rem}
.icon-btn{
  display:inline-flex;align-items:center;justify-content:center;width:40px;height:40px;border-radius:10px;
  background:transparent;color:var(--ctl-fg);border:1px solid transparent;cursor:pointer;font-size:1.1rem;
  transition:background .15s ease,border-color .15s ease,color .15s ease,box-shadow .2s ease
}

.icon-btn:hover{background:var(--ctl-hover-bg);border-color:var(--ctl-border)}
.icon-btn:active{background:var(--ctl-active-bg)}
.icon-btn i{pointer-events:none}
.icon-btn.danger{color:var(--modal-danger-fg);background:color-mix(in srgb,var(--modal-danger) 18%,transparent);border-color:color-mix(in srgb,var(--modal-danger) 45%,transparent)}
.icon-btn.danger:hover{background:color-mix(in srgb,var(--modal-danger) 28%,transparent)}
.side-section{background: var(--panel-bg);padding:1rem;border-bottom: .125rem dashed var(--section-divider-strong);}
.side-section h4{margin:.25rem 0 .75rem;color:var(--title-color)}
.side-grid{display:grid;grid-template-columns:1fr 1fr;gap:.5rem}
/* إخفاء وصفي لملصق select */
.visually-hidden{position:absolute!important;clip:rect(1px,1px,1px,1px);padding:0;border:0;height:1px;width:1px;overflow:hidden;}

/* اجعل .family-buttons داخل اللوحة على عدة أسطر */
.side-panel .family-buttons{flex-wrap:wrap}
.side-panel .family-item{width:100%}

/* ========== الثيمات والأزرار ========== */
.theme-buttons{display:flex;gap:.625rem;flex-wrap:wrap}
.theme-button{width:1.875rem;height:1.875rem;border-radius:50%;border:2px solid var(--surface-border);background:var(--color);cursor:pointer;transition:.2s}
.theme-button:hover{transform:scale(1.1);border-color:var(--color)}
.theme-button.active-theme{width:2.2rem;height:2.2rem;box-shadow:0 0 0 3px var(--ancestor-border)}
.family-buttons{display:flex;gap:.625rem}
.family-button{
  padding:.4rem 1.2rem;border:2px solid var(--ancestor-border);border-radius:.5rem;
  background:linear-gradient(135deg,var(--ancestor-bg),#fff);color:var(--text-main);
  font-weight:600;font-size:.9rem;cursor:pointer;transition:.25s;box-shadow:0 2px 4px rgba(0,0,0,.1)
}

.family-button:hover{background:var(--ancestor-border);color:#fff;transform:translateY(-2px);box-shadow:0 4px 8px rgba(0,0,0,.2)}
.family-button.active-family{background:var(--title-color);border-color:var(--arrow-color);color:#fff;box-shadow:0 4px 8px rgba(0,0,0,.3)}

/* ========== حجم الخط ========== */
.font-size-selector{display:flex;align-items:center;gap:.5rem;font-size:.9rem}
#fontSizeRange{cursor:pointer}
#fontSizeValue{min-width:2rem;text-align:center;font-weight:700}

/* ========== زر إعادة التفضيلات ========== */
#resetSettingsBtn{
  background:var(--ctl-bg);color:var(--ctl-fg);border:1px solid var(--ctl-border);
  border-radius:.5rem;padding:.4rem 1rem;font-size:.9rem;cursor:pointer;
  transition:background-color .2s ease,transform .2s ease
}
#resetSettingsBtn:hover{background:var(--ctl-hover-bg);transform:scale(1.04)}
#resetSettingsBtn:active{background:var(--ctl-active-bg);transform:scale(0.98)}
#resetSettingsBtn:focus-visible{outline:3px solid var(--ctl-ring);outline-offset:2px}
#resetSettingsBtn:disabled{opacity:.6;cursor:not-allowed;transform:none}

/* ========== تركيز الوصول ========== */
:where(button,[role="button"],.family-button,.theme-button):focus{outline:none}
:where(button,[role="button"],.family-button,.theme-button):focus-visible{
  outline:3px solid var(--focus-ring);outline-offset:2px;border-radius:.5rem
}

/* ========== تجاوبية ========== */
@media (max-width:48rem){.top-bar{flex-direction:column;align-items:stretch}}
/* ===== العائلات داخل الشريط الجانبي – تنسيق احترافي ===== */

/* الحاوية العامة */
.side-panel #familiesSection { padding-block: .75rem 1rem; }

/* صفّ كل عائلة: عمود للأزرار الصغيرة + عمود للزر الرئيسي */
/* صف واحد لكل عنصر عائلة */
.side-panel .family-item{
  display:flex;
  align-items:center;
  gap:.5rem;
  padding:.35rem;
  background:var(--card-bg);
  border:1px solid var(--surface-border);
  border-radius:.65rem;
  box-shadow:0 1px 3px rgba(0,0,0,.06);
  flex-wrap:nowrap;          /* لا يلتف */
}

/* الزر الرئيسي يتمدّد ويملأ المساحة */
.side-panel .family-item > .family-button{
  flex:1 1 auto;             /* يتمدّد مع الحفاظ على الحد الأدنى */
  min-inline-size:0;         /* لمنع تمدد النص داخل RTL/LTR */
  justify-content:center;
  padding:.55rem 1rem;
  border:2px solid var(--ancestor-border);
  border-radius:.65rem;
  background:linear-gradient(135deg,var(--ancestor-bg),#fff);
  font-weight:700;
  font-size:.95rem;
  color:var(--text-main);
  transition:transform .2s, box-shadow .2s, background-color .2s, color .2s;
}
.side-panel .family-item > .family-button:hover{
  background:var(--ancestor-border);
  color:#fff;
  transform:translateY(-1px);
  box-shadow:0 4px 10px rgba(0,0,0,.15);
}
.side-panel .family-item > .family-button.active-family{
  background:var(--title-color);
  border-color:var(--arrow-color);
  color:#fff;
  box-shadow:0 6px 12px rgba(0,0,0,.18);
}

/* أزرار الإجراءات الصغيرة في نفس الصف */
.side-panel .family-item > .btn.tiny{
  flex:0 0 40px;             /* عرض ثابت */
  inline-size:40px;
  block-size:40px;
  padding:0;
  display:grid;
  place-items:center;
  border-radius:.6rem;
  background:var(--chip-bg);
  border:1px solid var(--surface-border);
  color:var(--text-main);
  transition:background-color .15s, transform .15s, box-shadow .2s;
}
.side-panel .family-item > .btn.tiny i{pointer-events:none;font-size:1rem}

/* لم نعد نحتاج التكديس العمودي */
.side-panel .family-item > .btn.tiny + .btn.tiny{margin:0}

.side-panel .family-item > .btn.tiny:hover{
  background: color-mix(in srgb, var(--title-color) 12%, var(--chip-bg));
  transform: translateY(-1px);
  box-shadow: 0 3px 8px rgba(0,0,0,.12);
}
.side-panel .family-item > .btn.tiny i{ pointer-events: none; font-size: 1rem; }

/* زر "إنشاء عائلة جديدة" بأسلوب مميّز */
#addFamilyBtn{
  width: 100%;
  margin-top: .6rem;
  border-radius: .8rem;
  border: 2px dashed var(--ancestor-border);
  background: color-mix(in srgb, var(--ancestor-bg) 60%, #fff);
  font-weight: 800;
  justify-content: center
}
#addFamilyBtn:hover{
  background: var(--ancestor-border);
  color: #fff;
}

/* فاصلة بصرية خفيفة أسفل القائمة */
#familiesSection .family-buttons{ display: grid; gap: .55rem; }
#familiesSection::after{
  content: "";
  display: block;
  height: 1px;
  margin-top: .9rem;
  background: var(--section-divider-strong);
  opacity: .6;
}

/* تحجيم أفضل على الشاشات الضيقة: الأزرار الصغيرة أفقيّة بجانب بعضها */
@media (max-width: 440px){
  .side-panel .family-item{
    grid-template-columns: 1fr;
    gap: .4rem;
    padding: .45rem .45rem .55rem;
  }
  .side-panel .family-item > .family-button{ grid-column: 1; }
  .side-panel .family-item > .btn.tiny{
    grid-column: 1;
    inline-size: auto; block-size: 36px;
    padding-inline: .6rem;
    display: inline-flex; gap: .4rem; margin: 0;
  }
  .side-panel .family-item > .btn.tiny + .btn.tiny{ margin-inline-start: .4rem; }
}

/* ================== الأزرار العامة ================== */
.btn{
  background:var(--ctl-bg);color:var(--ctl-fg);border:1px solid var(--ctl-border);
  padding:.55rem 1rem;border-radius:.5rem;font-weight:600;cursor:pointer;
  transition:transform .2s ease,background-color .2s ease,box-shadow .2s ease
}
.btn:hover{background:var(--ctl-hover-bg);transform:scale(1.04)}
.btn:active{background:var(--ctl-active-bg);transform:scale(0.98)}
.btn:focus-visible{outline:3px solid var(--ctl-ring);outline-offset:2px}
.btn:disabled,.btn[disabled]{opacity:.55;filter:grayscale(.15);cursor:not-allowed;transform:none}
.btn.small{padding:.4rem .7rem;font-size:.85rem}
.btn.tiny{padding:.35rem .5rem;border-radius:.5rem;background:var(--card-bg);color:var(--text-main);border:1px solid var(--surface-border)}
.btn.tiny:hover{background:color-mix(in srgb,var(--title-color) 12%,var(--card-bg))}
.btn.primary{background:var(--modal-primary);color:var(--modal-primary-fg);border-color:var(--modal-primary)}
.btn.primary:hover{background:var(--modal-primary-hover)}
.btn.cancel{background:var(--modal-secondary);color:var(--modal-secondary-fg);border-color:var(--modal-secondary)}
.btn.cancel:hover{background:var(--modal-secondary-hover)}
.btn.danger,.danger-btn{background:var(--modal-danger)!important;color:var(--modal-danger-fg)!important;border-color:var(--modal-danger)!important}
.btn.danger:hover,.danger-btn:hover{background:var(--modal-danger-hover)!important}
.danger-btn i{margin-inline-start:.25rem}
@media (prefers-reduced-motion:reduce){.btn{transition:none;transform:none!important}}

.close-button{
  display:inline-flex;align-items:center;justify-content:center;width:2.25rem;height:2.25rem;
  border:.0625rem solid color-mix(in oklab,var(--modal-fg) 20%,transparent);border-radius:999px;background:transparent;cursor:pointer;
  transition:transform .12s,background-color .12s,border-color .12s;color:var(--modal-fg)
}
.close-button:hover{background:color-mix(in oklab,var(--modal-fg) 10%,transparent);transform:scale(1.04)}
.close-button:focus{outline:2px solid var(--title-color);outline-offset:2px}
/* ================== رأس الصفحة ================== */
header{
  text-align:center;margin:2rem 1rem 4rem;padding:2rem;background:var(--header-bg);
  border:1px solid var(--surface-border);border-radius:1rem;box-shadow:0 .25rem .375rem rgba(0,0,0,.1)
}
h1{font-size:3rem;color:var(--title-color);margin-bottom:1rem}
header>p{color:var(--text-main); width: fit-content; display: inline-block}

/* ================== تخطيط شجرة العائلة ================== */
.family-tree{display:flex;flex-direction:column;align-items:center;gap:3rem;padding:2rem}
.generation{
  display:flex;flex-wrap:wrap;justify-content:center;gap:2rem;
  position:relative;width:100%
}
/* الزوجة ككرت مرن يتجاوب مع العرض */
.wife-section{
  display:flex;flex-direction:column;align-items:center;
  padding:1rem;background:var(--card-bg);
  border:1px solid var(--surface-border);border-radius:1rem;
  flex:1 1 16rem;max-width:18rem;height:fit-content
}

.children-grid{margin-top:2rem;display:grid;gap:1.5rem}

/* عدادات */
.wife-counter,.grandson .sibling-counter,.grandson .wife-count,.grandson .Create_Children_CountBox{
  position:absolute;top:0;padding:.375rem .875rem;font-size:.8125rem;font-weight:bold;z-index:10
}
.wife-counter{right:-.25rem;text-align:right}
.grandson .sibling-counter{left:-.25rem;text-align:left}
.grandson .wife-count{right:-.25rem}
.grandson .Create_Children_CountBox{top:1.5rem;right:-.25rem;text-align:right}
.grandson .Create_Children_CountBox>p,.grandson .sibling-counter>p{padding-bottom:.2rem}
.grandson .Create_Children_CountBox .label,.grandson .sibling-counter>p,.grandson .wife-count>p{color:var(--title-color)}
.grandson .Create_Children_CountBox .value,.grandson .sibling-counter strong,.grandson .wife-count .value{color:var(--text-main)}
.wife-number{
  position:absolute;top:0;left:50%;transform:translateX(-50%);width:1.5rem;height:1.5rem;
  background:var(--ancestor-bg);border:.125rem solid var(--connector-color);color:var(--title-color);
  border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:.875rem;font-weight:600
}

/* ================== بطاقات الأعضاء ================== */
.member-card{
  position:relative;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  width:17rem;
  min-height:17rem;
  padding:1.5rem 1.25rem;
  text-align:center;
  border-radius:1rem;
  cursor:pointer;
  border:1px solid var(--surface-border);
  box-shadow:0 .25rem .375rem rgba(0,0,0,.1);
  transition:transform .3s cubic-bezier(.4,0,.2,1),
             box-shadow .3s cubic-bezier(.4,0,.2,1);
  gap:.75rem; /* مسافة طبيعية بين الأجزاء */
}
.member-card:hover{
  transform:translateY(-.3125rem);
  box-shadow:0 .75rem 1.25rem rgba(0,0,0,.15);
}

/* ألوان حسب النوع */
.member-card.ancestor{border:.125rem solid var(--ancestor-border);background:var(--card-bg);}
.member-card.wife{background:var(--wife-bg);}
.member-card.son{background:var(--son-bg);}
.member-card.daughter{background:var(--daughter-bg);}

/* الصورة / الأفتار */
.member-card>.avatar{
  width:5.25rem;
  height:5.25rem;
  display:flex;
  align-items:center;
  justify-content:center;
  margin:0;
  font-size:2.5rem;
  border-radius:50%;
  overflow:hidden;
  border:2px solid var(--ancestor-border);
  box-shadow:0 0 0 2px var(--card-bg);
  background:var(--avatar-bg);
  z-index: 1
}
.member-card>.avatar>img{
  display:block;
  width:100%;
  height:100%;
  object-fit:cover;
  border-radius:50%;
}

/* ألوان الأفتار لكل دور */
.member-card.ancestor>.avatar{background:var(--ancestor-bg);color:#d97706;}
.member-card.wife>.avatar{background:#ffe4e6;color:#e11d48;}
.member-card.son>.avatar{background:#e0f2fe;color:#0369a1;}
.member-card.daughter>.avatar{background:#f3e8ff;color:#7e22ce;}

[hidden]{display:none!important}

/* هوية الشخص (الاسم + الدور + تاريخ الميلاد) */
.member-card>.identity-fields{
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:flex-start;
  gap:.4rem;
  margin-top:.5rem;
}

/* الاسم */
.member-card>.identity-fields>.name{
  margin-block:.15rem;
  font-weight:700;
  font-size:1rem;
  color:var(--title-color);
  cursor:text;
}

/* حقل قابل للتحرير داخل الاسم */
.editable-inline{
  display:inline;
  width:fit-content;
  border:1px solid transparent;
  border-radius:.35rem;
  line-height:1.25;
  outline:0;
  background:rgba(0,0,0,.02);
  user-select:text;
  -webkit-user-modify:read-write-plaintext-only;
  transition:border-color .15s ease,
             box-shadow .15s ease,
             background-color .15s ease;
}
.editable-inline:focus{
  background:var(--card-bg);
  border-color:var(--focus-border);
  box-shadow:0 0 0 3px var(--focus-ring-soft);
}
.editable-inline:empty::before{
  content:attr(data-placeholder);
  color:var(--placeholder-fg);
  font-weight:400;
}
.editable-inline[contenteditable="true"][aria-invalid="true"]{
  border-color:var(--modal-danger);
  box-shadow:0 0 0 3px color-mix(in srgb,var(--modal-danger) 25%,transparent);
}

/* الشارة (الدور: ابن/بنت/زوجة/...) */
.member-card>.identity-fields>.role{
  display:inline-block;
  padding:.25rem .75rem;
  border-radius:1rem;
  font-size:.875rem;
  font-weight:700;
  color:var(--role-fg);
  background:var(--role-bg);
}

/* سطر الأم أسفل البطاقة */
.member-card .mini-strip{
  margin-top:auto;          /* يدفع الشريط لأسفل البطاقة داخل الـ flex */
  width:100%;
  text-align:center;
  font-size:.8rem;
  opacity:.9;
  padding-top:.45rem;
  border-top:1px dashed color-mix(in oklab,var(--surface-border) 60%,transparent);
}
.member-card .mini-strip span{
  opacity:.9;
}
.member-card .mini-strip strong{
  font-weight:600;
}


/* عدادات جانبية */
.counter-right,.counter-left{position:absolute;top:.35rem;display:flex;flex-direction:column}
.counter-right{right:.35rem;align-items:flex-start}
.counter-left{left:.35rem;align-items:flex-end}
.count-item{display:flex;gap:.3rem;align-items:center;margin-bottom:.3rem;font-size:.9rem;font-weight:bold}
.count-label{color:var(--title-color)}
.count-value{padding:.2rem;border-radius: 1rem;
    min-width: 1.80rem;background:var(--badge-bg);color:var(--text-main)}

/* ================== الفلاتر ================== */
#advFilters.filters{direction:rtl;margin:.6rem 0 1rem}
#advFilters .filters-card{
  background:var(--card-bg);border:1px solid var(--surface-border);border-radius:.75rem;
  padding:.75rem .9rem;box-shadow:0 1px 2px rgba(0,0,0,.04)
}
#advFilters .filters-grid{display:grid;grid-template-columns:repeat(4,minmax(140px,1fr));gap:.6rem}
@media (max-width:980px){#advFilters .filters-grid{grid-template-columns:repeat(2,1fr)}}
@media (max-width:520px){#advFilters .filters-grid{grid-template-columns:1fr}}
#advFilters .form-field{display:grid;gap:.3rem}
#advFilters .form-field label{font-size:.95rem;color:var(--label-fg); font-weight: 600;}
#advFilters select,#advFilters input[type="search"],#advFilters input[type="date"]{
  appearance:none;width:100%;padding:.5rem .6rem;border:1px solid var(--field-border);border-radius:.5rem;
  background:var(--field-bg);color:var(--text-main);font:inherit;line-height:1.4
}
#advFilters select:focus,#advFilters input:focus{outline:none;border-color:var(--focus-border);box-shadow:0 0 0 3px var(--focus-ring-soft)}
/* صندوق الفلاتر كلوحة قابلة للطي */
#advFilters.collapsible{
  overflow: hidden;
  max-height: 0;               /* مغلق */
  opacity: .0;
  transition: max-height .28s ease, opacity .18s linear, margin .18s ease;
  margin: 0;                   /* ألغِ الهامش عند الإغلاق */
}

/* عند الفتح */
#advFilters.collapsible.open{
  /* اجعل max-height يتحكم به JS بقيمة scrollHeight */
  opacity: 1;
  margin: .6rem 0 1rem;
}

/* احترام تفضيل المستخدم لتقليل الحركة */
@media (prefers-reduced-motion: reduce){
  #advFilters.collapsible{
    transition: none;
  }
}

.filters-title{
  margin:0 0 .8rem;
  font-size:1.05rem;
  font-weight:700;
  color:var(--title-color);
  text-align:start;
}

/* ================== الوصلات والسهام ================== */
.connector,.vertical-line.arrow-down{position:absolute;background:var(--arrow-color)}
.connector{top:100%;left:50%;width:.125rem;height:3rem;transform:translateX(-50%)}
.vertical-line.arrow-down{width:.125rem;height:1.25rem;margin-bottom:.5rem}
.vertical-line.arrow-down::after{
  content:'';position:absolute;bottom:-.5rem;left:50%;transform:translateX(-50%);
  border-left:.375rem solid transparent;border-right:.375rem solid transparent;border-top:.5rem solid var(--arrow-color)
}

/* ================== النافذة العامة (المودال) ================== */
.modal{
  position:fixed;inset:0;background:var(--modal-overlay);backdrop-filter:blur(.5rem);
  display:flex;justify-content:center;align-items:center;opacity:0;visibility:hidden;transition:opacity .8s,visibility .8s;z-index:1000
}
.modal.active{opacity:1;visibility:visible}
.modal-content{
  background:var(--modal-bg);color:var(--modal-fg);border:1px solid var(--modal-border);
  border-radius:1.5rem;width:90%;max-width:31.25rem;max-height:85vh;overflow-y:auto;
  transform:translateY(1.875rem) scale(.95);opacity:0;transition:all .4s ease;box-shadow:var(--modal-shadow)
}
.modal.active .modal-content{transform:translateY(0) scale(1);opacity:1}
.modal-header{
  padding:1.5rem;border-bottom:.0625rem solid var(--surface-border);
  display:flex;justify-content:space-between;align-items:center;background:var(--header-bg);color:var(--title-color)
}
.modal-header h2,.modal-header .role{font-size:1.5rem;margin:0}
.close-button{
  background:var(--card-bg);border:0;width:2.5rem;height:2.5rem;border-radius:50%;
  font-size:1.5rem;cursor:pointer;color:var(--text-main);
  display:flex;justify-content:center;align-items:center;transition:background .2s,color .2s
}
.close-button:hover{background:var(--chip-bg);color:var(--title-color)}

/* ===== أقسام السيرة داخل المودال ===== */
.bio-sections{
  display:flex;flex-direction:column;gap:.9rem;margin-block:.5rem 1rem;
}

/* كرت القسم العام */
.bio-section{
  background:var(--card-bg);border:1px solid var(--surface-border);border-radius:.9rem;
  padding:.65rem .9rem .8rem;color:var(--text-main);line-height:1.7;
  box-shadow:0 .25rem .6rem rgba(0,0,0,.04);
}

/* البيانات الأساسية: خلفية متدرجة وقائمة عمودية مريحة */
.bio-section[data-section-id="basic"]{
  background:linear-gradient(135deg,color-mix(in oklab,var(--ancestor-bg) 78%,#fff) 0%,var(--card-bg) 65%);
  border-color:var(--ancestor-border);
}
.bio-section[data-section-id="basic"] .bio-section-body{
  display:flex;flex-direction:column;gap:.35rem;padding-top:.3rem;
}
.bio-section[data-section-id="basic"] .bio-field{
  width: fit-content;display:flex;justify-content:flex-start;gap:.5rem;padding:.15rem .35rem;
}
.bio-section[data-section-id="basic"] .bio-field strong{
  flex:0 0 6.5rem;min-width:6.5rem;text-align:start;color:var(--title-color);
}
.bio-section[data-section-id="basic"] .bio-field span{
  flex:1 1 auto;
}
.bio-section[data-section-id="basic"] .bio-field .age-dead,
.bio-section[data-section-id="basic"] .bio-field .age-alive{
  display:inline-block;text-align:center;
}

/* رأس القسم (يُستخدم كبوتون للأقسام القابلة للطي) */
.bio-section-header{
  display:flex;align-items:center;justify-content:space-between;
  gap:.4rem;
  padding:.25rem .1rem .45rem;
  font-size:.98rem;font-weight:700;
  color:var(--title-color);
  background:transparent;border:0;
  cursor:pointer;text-align:start;
}

.bio-section[data-section-id="basic"] .bio-section-header{
  cursor:default;
  justify-content:flex-start;
  border-bottom:2px solid color-mix(in oklab,var(--title-color) 70%,transparent);
  margin-bottom:.35rem;
  padding:.3rem .1rem .65rem;
}

/* رأس البيانات الأساسية ثابت بدون سهم ولا طي */
.bio-section[data-section-id="basic"] .bio-section-header{
  justify-content:flex-start;cursor:default;
  font-size:1.05rem;
  font-weight:800; 
}

/* عنوان القسم + سهم الطي */
.bio-section-title{letter-spacing:.01em;}
.bio-section-toggle{font-size:.78rem;opacity:.8;}

/* جسم الأقسام الأخرى */
.bio-section-body{
  display:flex;flex-direction:column;gap:.4rem;padding-top:.3rem;
}
.bio-section:not([data-section-id="basic"]) .bio-section-body{
  border-top:1px dashed var(--section-divider-strong);margin-top:.45rem;padding-top:.55rem;
}

/* وصف عام / مربع معلومات إضافية */
.bio-description{margin:.625rem 0;}
.bio-info{
  background:var(--panel-bg);padding:.6rem .7rem;border-radius:.85rem;
  display:flex;flex-direction:column;gap:.35rem;
}

/* صف الحقل الافتراضي لبقية الأقسام */
.bio-field{
  display:flex;align-items:flex-start;gap:.3rem;font-size:.95rem;
}
.bio-field strong{
  color:var(--title-color);font-weight:700;flex:0 0 7.25rem;min-width:7.25rem;text-align:start;
}
.bio-field span{flex:1 1 auto;}

/* العمر (حي/متوفى) */
.age-alive{
  color:color-mix(in oklab,var(--modal-primary) 70%,var(--modal-fg));font-weight:500;
}
.age-dead{
  color:var(--modal-danger);font-weight:600;
  background:color-mix(in oklab,var(--modal-danger) 16%,transparent);
  padding:.12rem .5rem;border-radius:.4rem;
}

/* عناوين فرعية (جهة الأب/الأم…إلخ) */
.bio-section h3{
  color:var(--title-color);margin:.3rem 0 .45rem;font-size:.96rem;
}

/* القوائم داخل الأقسام (الإخوة، الزوجات، الأبناء…) */
.bio-section ul{
  list-style:none;padding:0;margin:0;
  display:flex;flex-direction:column;gap:.45rem;
}
.bio-section li{
  background:var(--list-item-bg);border:.0625rem solid var(--surface-border);
  padding:.5rem .9rem;border-radius:.55rem;font-size:.93rem;color:var(--text-main);
  transition:background .2s,color .2s,transform .16s;
}
.bio-section li:hover{
  background:var(--list-item-hover);color:var(--list-item-hover-fg);transform:translateY(-1px);
}

/* الهوايات (إن استُخدمت) */
.hobbies{display:flex;flex-wrap:wrap;gap:.5rem;}
.hobby{
  background:var(--chip-bg);color:var(--title-color);
  padding:.45rem 1rem;border-radius:1rem;font-weight:600;font-size:.88rem;
}

/* ================== الاقتراحات والبحث ================== */
.search-wrap{position:relative;min-width:16rem}
.suggestions{
  position:absolute;top:100%;right:0;left:0;background:var(--card-bg);
  border:1px solid var(--surface-border);border-radius:.5rem;margin-top:.25rem;z-index:10;display:none;max-height:18rem;overflow:auto
}
#familyTree{position:relative;z-index:10}
.suggestions.show{display:block}
.suggestions .item{padding:.5rem .75rem;cursor:pointer}
.suggestions .item:hover,.suggestions .item[aria-selected="true"]{background:var(--chip-bg)}
#searchSuggestions{position:absolute;max-height:17.5rem;overflow:auto;z-index:5}

/* ================== ترويسة السيرة بصورة ================== */
.bio-photo{display:flex;align-items:center;gap:1rem;margin-bottom:1rem}
.avatar-lg{width:72px;height:72px;border-radius:50%;overflow:hidden;flex:0 0 auto;border:1px solid var(--ancestor-border)}
.avatar-lg img{width:100%;height:100%;object-fit:cover;display:block}
.bio-head .bio-name{font-weight:700;font-size:1.05rem;color:var(--title-color)}
.bio-head .bio-role{opacity:.8;font-size:.9rem}
.bio-header{display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid var(--surface-border);padding:.75rem 1rem}
.bio-header-inner{display:flex;flex-direction:column;align-items:center;flex:1;gap:.4rem;text-align:center}
.bio-photo-top{width:84px;height:84px;border-radius:50%;overflow:hidden;border:2px solid var(--ancestor-border)}
.bio-photo-top .avatar{
  width:84px;height:84px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:42px;line-height:1;
  background:var(--avatar-bg);border:2px solid var(--ancestor-border);overflow:hidden
}
.bio-photo-top img{width:100%;height:100%;object-fit:cover;display:block}
.bio-header-controls{display:flex;align-items:center;gap:.5rem}
.bio-header{position:relative;display:flex;flex-direction:column;align-items:center;padding:1rem .75rem .9rem;gap:.75rem}
.bio-header .close-button{position:absolute;inset-inline-start:.75rem;top:.65rem;z-index:1}
.bio-identity{display:flex;flex-direction:column;align-items:center;text-align:center;gap:.45rem;width:100%}
#bioTools{display:flex;flex-wrap:wrap;gap:.4rem;margin-top:.35rem;justify-content:center}
.bio-divider {
    width: 100%;
    border: 0;
    height: 1px;
    background:
    var(--section-divider-strong,
      var(--section-divider,
        var(--surface-border, color-mix(in srgb, var(--text-main) 28%, transparent))));
    margin: .25rem 0 0
}.bio-actions{display:flex;flex-wrap:wrap;align-items:center;justify-content:center;gap:.5rem;width:100%}
.bio-photo-top{width:96px;height:96px;border-radius:50%;overflow:hidden;border:2px solid var(--ancestor-border)}
.bio-photo-top .avatar{width:96px;height:96px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:48px;line-height:1;background:var(--avatar-bg);border:2px solid var(--ancestor-border);overflow:hidden}
.bio-photo-top img{width:100%;height:100%;object-fit:cover;display:block}
/* إخفاء زر المسح الأصلي للمتصفحات WebKit */
input[type="search"]::-webkit-search-cancel-button{ -webkit-appearance:none; }

/* الحاوية العامة لحقل + زر المسح */
.input-wrap{position: relative;display: flex;align-items: center;}

/* أضف مساحة للزر داخل الحقل */
.input-wrap input{padding-inline-end: 2rem; /* يدعم RTL/LTR منطقياً */}

/* زر المسح */
.clear-btn{position: absolute;inset-inline-end: .5rem; /* يثبت الزر في نهاية السطر RTL/LTR */inline-size: 1.75rem;block-size: 1.75rem;display: grid;
  place-items: center;background: transparent;border: 0;cursor: pointer;color: var(--ink, #333);opacity: .55;transition: opacity .15s ease;}

.clear-btn:hover{ opacity: .95; }
.clear-btn:focus{ outline: 2px solid color-mix(in oklab, var(--ink, #333) 40%, transparent); outline-offset: 2px; }

/* اختياري: إخفاء الزر عندما الحقل فارغ */
.clear-btn[hidden]{ display: none !important; }

/* ================== تجاوب الشاشات ================== */
@media (max-width:23.9rem){
  .top-bar{flex-wrap:wrap;gap:.6rem;align-items:center}
  .search-wrap{flex:1 1 100%;min-width:0}
  .family-button,#filtersToggle,.date-time-display{flex:0 0 auto}
  .btn,input,select{font-size:.8rem;padding:.4rem .6rem}

  .generation{flex-direction:column;align-items:stretch;gap:1.5rem}
  .wife-section{flex:1 1 100%;max-width:100%}
}

@media (min-width:24rem) and (max-width:29.9rem){
  .top-bar{flex-wrap:wrap;gap:.8rem}
  .search-wrap{flex:1 1 100%;min-width:0}

  .generation{justify-content:center;gap:1.75rem}
  .wife-section{flex:1 1 calc(50% - 1rem);max-width:20rem}
}

@media (min-width:30rem) and (max-width:39.9rem){
  .top-bar{flex-wrap:nowrap;gap:1rem}
  .search-wrap{flex:1 1 clamp(240px,45vw,500px)}

  .generation{justify-content:center;gap:2rem}
  .wife-section{flex:1 1 calc(50% - 1.2rem);max-width:21rem}
}

@media (min-width:40rem) and (max-width:47.9rem){
  .top-bar{gap:1rem}
  .search-wrap{flex:1 1 clamp(260px,48vw,520px)}

  .generation{justify-content:center;gap:2.25rem}
  .wife-section{flex:1 1 calc(50% - 1.5rem);max-width:22rem}
}

@media (min-width:48rem) and (max-width:63.9rem){
  .top-bar{gap:1rem}
  .search-wrap{flex:1 1 clamp(280px,42vw,540px)}

  .generation{justify-content:center;gap:2.5rem}
  .wife-section{flex:1 1 calc(33.333% - 1.5rem);max-width:22rem}
}

@media (min-width:64rem){
  .search-wrap{flex:1 1 clamp(320px,36vw,560px)}
  .generation{flex-wrap:wrap;justify-content:center;gap:4rem}
  .wife-section{flex:0 1 18rem;max-width:18rem}
}
