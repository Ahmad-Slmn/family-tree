/*================== photoGallery.css معرض الصور ================== */

/* طبقة المودال */
.photoGalleryModal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;padding:1.25rem;background:color-mix(in oklab,var(--modal-overlay) 80%,transparent);backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px);z-index:1200}
.photoGalleryModal.show{display:flex}

/* صندوق المعرض */
.photoGalleryModal .modal-content{
  inline-size:80vw;max-inline-size:64rem;max-block-size:80vh;min-block-size:60vh;
  background:linear-gradient(180deg,color-mix(in oklab,var(--panel-bg) 70%,#fff) 0%,color-mix(in oklab,var(--card-bg) 100%,transparent) 55%,color-mix(in oklab,var(--modal-bg) 95%,#fff) 100%);
  border-radius:1.25rem;border:.0625rem solid color-mix(in oklab,var(--modal-fg) 12%,transparent);box-shadow:var(--modal-shadow);
  padding:1.25rem 1.4rem 1.1rem;display:flex;flex-direction:column;gap:.9rem;overflow:hidden;
  transform:translateY(10px) scale(.98);animation:galleryIn .24s ease-out forwards
}

/* حركة دخول */
@keyframes galleryIn{from{opacity:0;transform:translateY(14px) scale(.96)}to{opacity:1;transform:translateY(0) scale(1)}}

/* رأس المعرض */
.photoGalleryModal .modal-header{
  display:flex;align-items:center;gap:.8rem;
  padding:.65rem 1rem .7rem;margin-block-end:.4rem;
  border-radius:1.75rem;
  background:color-mix(in oklab,var(--accent-success) 12%,var(--modal-bg));
  border:.0625rem solid color-mix(in oklab,var(--accent-success) 35%,transparent);
  box-shadow:0 .05rem .3rem color-mix(in oklab,var(--modal-fg) 12%,transparent) inset
}
.photoGalleryModal .modal-header .close-button{flex:0 0 auto}
.modal-header-text{
  flex:1;display:flex;flex-direction:column;gap:.2rem;
  text-align:center
}
.photoGalleryModal #galleryTitle{margin:0;font-size:1rem;color:var(--title-color);font-weight:700}
.gallery-subtitle{margin:0;font-size:.78rem;color:color-mix(in oklab,var(--text-main) 70%,transparent);opacity:.9}

/* جسم المعرض */
.photoGalleryModal .modal-body{padding:0;flex:1;overflow-y:auto;overflow-x:hidden;scrollbar-gutter:stable both-edges}

/* شريط الأدوات أعلى الشبكة */
.photo-gallery-toolbar{
  display:flex;align-items:center;gap:.6rem;
  padding:.25rem .25rem .7rem;
  flex-wrap:wrap
}
.photo-gallery-cat{flex:1 1 8rem;min-inline-size:0;display:flex;justify-content:flex-start; max-height: fit-content}
.photo-gallery-meta{
  flex:0 0 auto;margin-inline-start:auto;
  font-size:.78rem;color:var(--text-main);white-space:nowrap
}


/* قائمة التصنيف */
#photoGalleryCategory{
  appearance:none;-webkit-appearance:none;-moz-appearance:none;
  inline-size:min(14rem,100%);padding:.38rem 1.9rem .38rem .75rem;
  border-radius:999px;border:.0625rem solid .0625rem solid color-mix(in oklab,var(--accent-success) 35%,transparent);
  background:var(--card-bg)
    url("data:image/svg+xml,%3Csvg width='14' height='10' viewBox='0 0 14 10' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M2 2L7 7L12 2' stroke='%23999' stroke-width='2' stroke-linecap='round'/%3E%3C/svg%3E")
    no-repeat right .7rem center/14px;
  font-size:.86rem;font-weight:600;color:var(--text-main);cursor:pointer;
  transition:border-color .15s,box-shadow .15s,background-color .15s
}
#photoGalleryCategory:focus-visible{outline:none;border-color:var(--accent-success);box-shadow:0 0 0 .12rem color-mix(in oklab,var(--accent-success) 28%,transparent)}
#photoGalleryCategory:hover{border-color:color-mix(in oklab,var(--accent-success) 45%,transparent)}

/* البحث */
.photo-gallery-search{flex:2 1 10rem;min-inline-size:0;position:relative; max-height: fit-content}
.photo-gallery-search-ico{
  position:absolute;inset-inline-start:.65rem;inset-block-start:50%;transform:translateY(-50%);
  display:inline-flex;align-items:center;justify-content:center;
  block-size:1.15rem;line-height:1;font-size:.9rem;
  color:color-mix(in oklab,var(--modal-fg) 60%,transparent);
  pointer-events:none;opacity:.85
}

.photo-gallery-search input{
  inline-size:100%;padding:.5rem 2.1rem .5rem 2.05rem;
  border-radius:999px;border:.0625rem solid color-mix(in oklab,var(--modal-fg) 18%,transparent);
  background:var(--card-bg);
  font-size:.85rem;color:var(--text-main);outline:none;
  transition:border-color .15s,box-shadow .15s,background-color .15s
}
.photo-gallery-search input::placeholder{color:var(--placeholder-fg)}
.photo-gallery-search input:focus-visible{border-color:var(--accent-success);box-shadow:0 0 0 .12rem color-mix(in oklab,var(--accent-success) 28%,transparent)}
.photo-gallery-clear-btn{
  position:absolute;inset-inline-end:.45rem;inset-block:50%;transform:translateY(-50%);
  inline-size:1.35rem;block-size:1.35rem;border-radius:999px;border:none;
  display:inline-flex;align-items:center;justify-content:center;
  background:color-mix(in oklab,var(--modal-fg) 6%,transparent);
  color:color-mix(in oklab,var(--modal-fg) 80%,#000);
  cursor:pointer;font-size:.7rem;padding:0
}
.photo-gallery-clear-btn:hover{background:color-mix(in oklab,var(--modal-fg) 16%,transparent)}
.photo-gallery-clear-btn i{pointer-events:none}

/* عنوان الفواصل */
.photo-gallery-section-title{
  grid-column:1/-1;font-size:.9rem;font-weight:700;color:var(--text-main);
  margin:.4rem .1rem .2rem;padding:.2rem .25rem;
  border-bottom:.05rem solid color-mix(in oklab,var(--modal-fg) 12%,transparent);opacity:.9
}

/* الشبكة */
.photo-gallery-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:1rem 1.1rem;padding-inline:.1rem}

/* بطاقة الصورة */
.photo-gallery-item{
  inline-size:100%;background:color-mix(in oklab,var(--card-bg) 85%,var(--modal-bg));
  border-radius:1rem;padding:0;overflow:hidden;
  display:flex;flex-direction:column;cursor:pointer;
  box-shadow:0 .15rem .5rem color-mix(in oklab,#000 14%,transparent);
  border:.0625rem solid color-mix(in oklab,var(--modal-fg) 10%,transparent);
  transition:transform .16s ease,box-shadow .16s ease,border-color .16s ease,background-color .16s ease,filter .16s ease
}
.photo-gallery-item:hover{
  transform:translateY(-4px) scale(1.03);
  box-shadow:0 .5rem 1.3rem color-mix(in oklab,#000 24%,transparent);
  border-color:color-mix(in oklab,var(--accent-success) 60%,transparent);
  background:color-mix(in oklab,var(--accent-success) 6%,var(--card-bg))
}
.photo-gallery-item:focus-visible{
  outline:2px solid color-mix(in oklab,var(--accent-success) 75%,transparent);outline-offset:2px;
  transform:translateY(-2px) scale(1.02);
  box-shadow:0 .35rem 1rem color-mix(in oklab,var(--accent-success) 40%,transparent)
}
.photo-gallery-item:active{transform:translateY(-1px) scale(.99);filter:brightness(.97)}
.photo-gallery-item.is-selected{
  border-color:color-mix(in oklab,var(--accent-success) 70%,transparent);
  box-shadow:0 0 0 .12rem color-mix(in oklab,var(--accent-success) 25%,transparent),0 .4rem 1.1rem color-mix(in oklab,#000 20%,transparent)
}
.photo-gallery-item.skeleton{
  cursor:default;box-shadow:none;
  border-color:color-mix(in oklab,var(--modal-fg) 8%,transparent);
  background:color-mix(in oklab,var(--modal-bg) 96%,#e5e7eb)
}
.photo-gallery-thumb-skeleton,
.photo-gallery-label-skeleton{
  position:relative;overflow:hidden;
  background:color-mix(in oklab,var(--modal-bg) 85%,#e5e7eb)
}
.photo-gallery-thumb-skeleton::after,
.photo-gallery-label-skeleton::after{
  content:"";position:absolute;inset:0;
  background:linear-gradient(90deg,transparent,color-mix(in oklab,#ffffff 70%,transparent),transparent);
  animation:gallerySkeleton 1.1s linear infinite
}
.photo-gallery-label-skeleton{min-block-size:1rem;margin-block-start:.45rem;border-radius:.5rem}

/* حركة الوميض */
@keyframes gallerySkeleton{from{transform:translateX(-100%)}to{transform:translateX(100%)}}

/* الصورة في أعلى البطاقة */
.photo-gallery-thumb-wrap{
  position:relative;inline-size:100%;aspect-ratio:3/4;
  overflow:hidden;border-radius:1rem 1rem 0 0;
  background:color-mix(in oklab,var(--avatar-bg) 70%,var(--card-bg))
}
.photo-gallery-thumb{inline-size:100%;block-size:100%;object-fit:cover;object-position:center;display:block;image-rendering:auto}

/* عنوان الصورة */
.photo-gallery-label{
  font-size:.88rem;font-weight:600;color:var(--title-color);
  text-align:center;padding:.55rem .45rem .6rem;white-space:nowrap
}

/* لا توجد نتائج */
.photo-gallery-empty{grid-column:1/-1;text-align:center;padding:1.2rem .6rem;font-size:.9rem;color:var(--placeholder-fg)}

/* أيقونة المعاينة */
.photo-gallery-preview-ico{
  position:absolute;inset-block-end:.25rem;inset-inline-end:.25rem;
  display:inline-flex;align-items:center;justify-content:center;
  inline-size:1.75rem;block-size:1.75rem;
  color:var(--text-main);border-radius:999px;
  background:color-mix(in oklab,var(--modal-bg) 88%,transparent);
  box-shadow:0 0 .25rem rgba(15,23,42,.25);
  font-size:.8rem;cursor:pointer;opacity:0;transform:scale(.9);
  transition:opacity .15s ease,transform .15s ease
}
.photo-gallery-item:hover .photo-gallery-preview-ico,
.photo-gallery-item:focus-visible .photo-gallery-preview-ico{opacity:1;transform:scale(1)}

/* طبقة معاينة الصورة */
.photo-gallery-preview-layer{
  position:fixed;inset:0;z-index:1300;
  display:flex;align-items:center;justify-content:center;
  padding:1.5rem;background:color-mix(in oklab,var(--modal-overlay) 85%,transparent);
  backdrop-filter:blur(6px);-webkit-backdrop-filter:blur(6px)
}

/* صندوق المعاينة */
.photo-gallery-preview-box{
  max-inline-size:80vw;max-block-size:80vh;
  background:var(--modal-bg);border-radius:.75rem;
  box-shadow:0 1.25rem 3rem rgba(15,23,42,.35);
  padding:.75rem;display:flex;flex-direction:column;gap:.5rem
}
.photo-gallery-preview-close{align-self:flex-end}
.photo-gallery-preview-inner{
  flex:1;display:flex;align-items:center;justify-content:center;
  overflow:hidden;border-radius:.5rem
}
.photo-gallery-preview-img{max-inline-size:100%;max-block-size:70vh;object-fit:contain;display:block}

/* =========================================================
   تجاوب خاص بمعرض الصور الجاهزة
========================================================= */

/* 1) شاشات صغيرة جدًا max-width:23.9rem */
@media (max-width:23.9rem){
  .photoGalleryModal{padding:.6rem;align-items:flex-end}
  .photoGalleryModal .modal-content{
    inline-size:95vw;max-inline-size:95vw;max-block-size:85vh;
    border-radius:1rem 1rem 0 0
  }
  .photoGalleryModal .modal-header{padding:.55rem .8rem .6rem;border-radius:1.4rem}
  .photo-gallery-toolbar{
    flex-direction:column;align-items:stretch;
    gap:.35rem;padding:.25rem .15rem .5rem
  }
  .photo-gallery-search input{
    font-size:.8rem;
    padding:.42rem 2rem .42rem 1.8rem
  }
  .photo-gallery-cat{width:100%}
  #photoGalleryCategory{
    inline-size:100%;font-size:.8rem;
    padding:.34rem 1.6rem
  }

  .photo-gallery-meta{
    margin-inline-start:0;align-self:flex-start;
    font-size:.76rem
  }
  .photo-gallery-grid{grid-template-columns:repeat(2,minmax(0,1fr))}
}

/* 2) موبايل صغير min-width:24rem and max-width:29.9rem */
@media (min-width:24rem) and (max-width:29.9rem){
  .photoGalleryModal{padding:.7rem}
  .photoGalleryModal .modal-content{
    inline-size:94vw;max-inline-size:94vw;max-block-size:85vh;
    border-radius:1.05rem
  }
  .photo-gallery-toolbar{
    flex-direction:column;align-items:stretch;
    gap:.35rem;padding:.3rem .2rem .55rem
  }
  .photo-gallery-search input{
    font-size:.82rem;
    padding:.44rem 2rem .44rem 1.9rem
  }
  .photo-gallery-cat{width:100%}
  #photoGalleryCategory{
    inline-size:100%;font-size:.82rem;
    padding:.36rem 1.7rem
  }

  .photo-gallery-meta{margin-inline-start:0;align-self:flex-start}
  .photo-gallery-grid{grid-template-columns:repeat(2,minmax(0,1fr))}
}

/* 3) موبايل عادي min-width:30rem and max-width:39.9rem */
@media (min-width:30rem) and (max-width:39.9rem){
  .photoGalleryModal{padding:.8rem}
  .photoGalleryModal .modal-content{
    inline-size:92vw;max-inline-size:92vw;max-block-size:85vh;
    border-radius:1.1rem
  }
  .photo-gallery-toolbar{flex-wrap:wrap}
  .photo-gallery-grid{grid-template-columns:repeat(3,minmax(0,1fr))}
}

/* 4) تابلت صغير min-width:40rem and max-width:47.9rem */
@media (min-width:40rem) and (max-width:47.9rem){
  .photoGalleryModal{padding:1rem}
  .photoGalleryModal .modal-content{
    inline-size:88vw;max-inline-size:52rem;max-block-size:85vh;
    border-radius:1.15rem
  }
  .photo-gallery-grid{grid-template-columns:repeat(auto-fit,minmax(130px,1fr))}
}

/* 5) تابلت / لابتوب صغير min-width:48rem and max-width:63.9rem */
@media (min-width:48rem) and (max-width:63.9rem){
  .photoGalleryModal{padding:1.1rem}
  .photoGalleryModal .modal-content{
    inline-size:86vw;max-inline-size:56rem;max-block-size:85vh;
    border-radius:1.2rem
  }
  .photo-gallery-grid{grid-template-columns:repeat(auto-fit,minmax(135px,1fr))}
}

/* 6) ديسكتوب واسع min-width:64rem */
@media (min-width:64rem){
  .photoGalleryModal{padding:1.25rem}
  .photoGalleryModal .modal-content{
    inline-size:80vw;max-inline-size:64rem;max-block-size:80vh;
    border-radius:1.25rem
  }
  .photo-gallery-grid{grid-template-columns:repeat(auto-fit,minmax(140px,1fr))}
}
